<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="ot.team1.dao.IMemberDao">

	<resultMap id="memberMap" type="java.util.HashMap"></resultMap>
	
	<select id="getMember" statementType="CALLABLE"	 parameterType="java.util.HashMap">
		{
			CALL getMember(
				#{userid},
				#{rfcursor, mode=OUT, jdbcType=CURSOR, javaType=ResultSet, resultMap=memberMap}
			)
		}
	</select>
	
	<insert id="joinKakao" statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL joinKakao(
				#{userid}, #{name}, #{tel}, #{email}, #{provider}
			)
		}
	</insert>
	
	<insert id="insertMember"  statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL insertMember(
				#{userid}, #{pwd}, #{name}, #{gender}, #{birthdate}, #{tel},
				#{email}, #{zipnum}, #{address1}, #{address2}, #{address3}, #{provider}
			)
		}
	</insert>
	
	<insert id="updateMember"   statementType="CALLABLE" parameterType="java.util.HashMap">
		{
			CALL updateMember(
				#{USERID}, #{PWD}, #{NAME}, #{GENDER}, #{BIRTHDATE}, #{TEL}, #{EMAIL},
				#{ZIPNUM}, #{ADDRESS1}, #{ADDRESS2}, #{ADDRESS3}, #{PROVIDER}
			)
		}
	</insert>
	
	<!-- 회원을 delete 하는게 아닌 useyn을 N으로 바꾸는 것 -->
	<update id="deleteMember" statementType="CALLABLE"  parameterType="java.util.HashMap">
		{
			CALL deleteMember( #{userid} )
		}
	</update>
	
	


</mapper>